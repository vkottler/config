---
default_dirs: false

configs:
  - configs

templates:
  - templates

renders:
  - name: native_tasks.py
    output_dir: tasks
    output_path: conf.py
    dependencies: &local
      - compiles-local

  - name: clang-format
    output_dir: "."
    output_path: .clang-format
    dependencies: *local

  # depends on yambs_constants
  - name: yambs-project.yml
    output_dir: ".github/workflows"
    dependencies: *local
    template_dependencies: &constants
      - yambs_constants

  - name: requirements.txt
    output_dir: "{{slug}}"
    template_dependencies: *constants
    dependencies: *local

  - name: yambs.yaml
    output_dir: "."
    dependencies: *local

  - name: README.md
    output_dir: "."
    dependencies: *local

  - name: env
    output_dir: "."
    output_path: .env
    dependencies: *local

  - name: gdbinit
    output_dir: "."
    output_path: .gdbinit
    dependencies: *local

  - name: vimrc
    output_dir: "."
    output_path: .vimrc
    dependencies: *local

  - name: gitignore
    output_dir: "."
    output_path: .gitignore
    dependencies: *local

  - name: index.rst
    output_dir: docs
    dependencies: *local

  - name: conf.py
    output_dir: docs
    dependencies:
      - compiles-license

groups:
  - name: yambs-native-renders-minimal
    dependencies:
      - renders-native_tasks.py
      - renders-clang-format
      - renders-conf.py
      - renders-requirements.txt
      - renders-gitignore

  - name: yambs-embedded-renders
    dependencies:
      - renders-env
      - renders-gdbinit
      - renders-vimrc

  - name: yambs-native-renders
    dependencies:
      - renders-yambs-project.yml
      - renders-README.md
      - renders-yambs.yaml
      - renders-index.rst
      - groups-yambs-native-renders-minimal
